<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <!-- Viewport for mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hallein-App - Backend</title>
    <!-- Stylesheet -->
    <link rel="stylesheet" href="public/css/style.css" media="screen">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300" rel="stylesheet">
    <!-- Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.0/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.0/jquery-ui.min.js"></script>
    <!-- AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-route.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-cookies.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ngDraggable/0.1.11/ngDraggable.min.js"></script>
    <script src="public/js/app.js"></script>
    <!-- Libraries -->
    <!-- Tooltipster -->
    <link rel="stylesheet" type="text/css" href="assets/plugins/tooltipster/dist/css/tooltipster.bundle.min.css"/>
    <script type="text/javascript" src="assets/plugins/tooltipster/dist/js/tooltipster.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" href="public/css/tooltipster.css"/>
    <!-- JSCookie -->
    <script src="assets/plugins/js-cookie/js.cookie.js"></script>
    <!-- Select2 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
    <link rel="stylesheet" href="assets/plugins/select2/select2.css"/>
</head>
<body ng-app="myApp" ng-controller="mainController" ng-keydown="checkKey($event)">
<div>
    <!-- Login -->
    <div class="login" ng-if="!loggedIn" ng-class="{true:'logout'}[logout]" ng-controller="loginController">
        <h1>{{ route.title }}</h1>
        <div class="devs" ng-if="route.aboutUs"><a href="#">Die Entwickler</a>|<a href="#">Ãœber</a></div>
        <div class="loginwrapper" ng-include="route.content"></div>
    </div>
    </div>
    <div class="wrapper" ng-class="{true:'finished'}[loggedIn]">
        <!-- Popup -->
        <div class="overlay" ng-class="{visible: popup}" ng-click="popupClose()"></div>
        <div class="popup large" ng-if="popup" ng-class="{visible: popup}"><i class="material-icons close" ng-click="popupClose()">close</i>
            <h2>{{ popup.title }}</h2>
            <navigation>
                <ul>
                    <li ng-repeat="link in popup.links" ng-click="popupLoad($index)"><i class="material-icons">{{link.icon}}</i>{{ link.name }}</li>
                </ul>
            </navigation>
            <content ng-include="popup.content"></content>
            <div class="action"><i class="material-icons" ng-repeat="action in popup.actions">{{ action.icon }}</i></div>
        </div>
        <!-- Topbar -->
        <div class="topbar">
            <i class="material-icons burgericon">menu</i>
            <h1 class="headline">Verwaltungsdashboard</h1>
            <div class="user">
                {{ username }}
                <img src="assets/imgs/profile_default.png"/>
                <img class="icon" src="assets/icons/arrow_down.png"/>
            </div>
            <div class="options">
                <ul>
                    <li ng-click="openSettings()">Einstellungen</li>
                    <li id="logout" ng-click="logOut()">Logout</li>
                </ul>
            </div>
        </div>
        <!-- Navbar -->
        <div class="navbar">
            <ul ng-repeat="route in routes">
                <a href="#{{ route.path }}">
                    <li><img class="icon" ng-src="assets/icons/{{ route.icon }}"/>{{ route.name }}</li>
                </a>
            </ul>
        </div>
        <!-- Container -->
        <div class="container">
            <div class="fullBox" ng-if="frame.type == 'fullBox'">
                <div class="title" ng-class="loading.status">
                    <h2 ng-if="loading.text">{{ loading.text }}</h2>
                    <h2 ng-if="!loading.text">{{ frame.title }}</h2>
                    <div class="actions">
                        <div class="loadingSpinner" ng-show="loading">
                            <div class="loading" ng-show="loading.status == 'loading'"></div>
                            <div class="success" ng-show="loading.status == 'success'"><i class="material-icons">done</i></div>
                            <div class="error" ng-show="loading.status == 'error'"><i class="material-icons">close</i></div>
                        </div>
                            <a class="tooltipBottom" ng-show="!loading" ng-repeat="action in frame.actions" href="#{{ action.route }}" ng-click="foodAdd()" title="{{ action.title }}">
                                <div class="icon"><i class="material-icons">{{ action.icon }}</i></div>
                            </a>
                    </div>
                </div>
                <div class="content">
                    <div class="view" ng-view></div>
                </div>
            </div>
            <div class="switchBox" ng-if="frame.type == 'switchBox'">
                <ul class="switcher">
                    <li ng-repeat="switch in frame.switcher" ng-click="frameSwitch($index)" ng-class="{true:'active'}[$index + 1 == frame.switched]">{{ switch }}</li>
                </ul>
                <h2>{{ frame.title }}</h2>
                <div class="content">
                    <div class="view" ng-view></div>
                </div>
            </div>
            <div class="view" ng-if="!frame" ng-view></div>
        </div>
        <div class="actionbar" ng-class="{true:'visible'}[action]">
            <div ng-repeat="action in actions">
                <a href="#{{ action.route }}">
                    <div class="icon tooltip" ng-class="{true:'bottom'}[action.bottom]" title="{{ action.title }}"><i class="material-icons">{{ action.icon }}</i></div>
                </a>
            </div>
        </div>
    </div>
</div>
</body>
</html>